

<!-- 
<div style="text-align: center;">
  
    <div>
        <div class="input-group mb-3 mt-3">
            <input 
              class="form-control" 
              type="text" 
              [(ngModel)]="searchText" 
              placeholder="Search..." 
              (input)="filteredItems()"
            />
            <span class="input-group-text">
              <i class="fas fa-search"></i>
            </span>
          </div> 
    </div>
  </div> -->
  <div class="card mt-2">
    <div class="row">
      <div class="col-6 d-flex justify-content-center align-items-center">
        <h2 class="mt-" style="color:#973d93">Order Status</h2>
      </div>
  
      <div class="col-6 ">
        <div class="input-group mb-3 mt-3">
          <input class="form-control" type="text" [(ngModel)]="searchText" placeholder="Search..."
            (input)="filteredItems()" />
          <span class="input-group-text">
            <i class="fas fa-search"></i>
          </span>
        </div>
  
      </div>
    </div>
  </div><div *ngIf="isProcesing" class="processing">
    <div class="processing-spinner">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Processing...</span>
        </div>
        <p class="mt-3">Fetching data.., please wait...</p>
    </div>
  </div>
  

  <div *ngIf="!isProcesing">
  <div *ngIf="AllOrders.length > 0; else noRegistrations">
    
<div class="table-responsive">
<table class="table mt-2" >
    <thead>
      <tr >
        <th>Date</th>
        <th>Order Code</th>
        <th>User</th>
        <th>Payment Method</th>
        <th>Payment Status</th>
        <th>Order Status</th>
        <th> Change Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let order of AllOrders" >
        <td>{{order.created_on|date}}</td>
       <td>{{order.order_code}}</td>
       <td>{{order.first_name}}</td>
       <!-- <td>{{order.da}}</td> -->
       <td>{{order.payment_method}}</td>
       <td>{{order.payment_status}}</td>
       <td [ngStyle]="{
        'color': order.order_status === 'Processing' ? 'orange' : 
                  order.order_status === 'Pending' ? 'red' : 
                  order.order_status === 'Completed' ? 'green' : 'black'
      }">
        {{ order.order_status }}
      </td>
       <td>
        <div class="form-group">
         <div class="position-relative d-inline-block">
                <select id="status" class="form-control" (change)="onStatusChange($event, order.id)" 
                        [disabled]="order.order_status === 'Canceled' || loading && currentOrderId === order.id">
                  <option value="" disabled selected>Select Status</option>
                  <option value="Processing">Processing</option>
                  <option value="Completed">Completed</option>
                </select>   
              
                <!-- Loading spinner overlay -->
                <div *ngIf="loading && currentOrderId === order.id" 
                     class="position-absolute d-flex align-items-center justify-content-center" 
                     style="top: 0; right: 0; bottom: 0; left: 0; z-index: 2; background: rgba(255, 255, 255, 0.5);">
                  <div class="spinner-border text-primary" role="status">
                    <span class="sr-only">Loading...</span>
                  </div>
                </div>
              </div>
              
              
       
       
      </div>
        
    </td>
      </tr>
      
    </tbody>
  </table>
  <div class="pagination-controls text-center my-3">
    <button class="button btn-outline-primary rounded-pill mx-2" (click)="loadPreviousPage()"
      [disabled]="!previous">Previous</button>
    <span class="mx-2">Page {{ currentPage }}</span>
    <button class="button btn-outline-primary rounded-pill mx-2" (click)="loadNextPage()"
      [disabled]="!next">Next</button>
  </div>
</div>
</div>
  </div>
<ng-template #noRegistrations>
 
    <div class="rows">
      <div>
      <div class="cards">
        <h1 class="h1">No records found</h1>
      </div>
    </div>
  </div>
</ng-template>

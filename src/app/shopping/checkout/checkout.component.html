<div class="container mb-3">
    <h2 *ngIf="!isOrderConfirmed" style="text-align: center; font-weight: 700; color: #973d93;">Checkout</h2>
    <hr *ngIf="!isOrderConfirmed">
    <div *ngIf="!isOrderConfirmed">
        <div class="steps">
            <div [class.active]="currentStep === 0">
                <i class="bi bi-truck"></i>
                <span>Delivery</span>
            </div>
            <div [class.active]="currentStep === 1">
                <i class="bi bi-credit-card"></i>
                <span>Payment</span>
            </div>
        </div>
        <div *ngIf="currentStep === 0">
            <!-- <h4>Delivery Information</h4> -->
            <form [formGroup]="checkoutForm" class="mt-1">
                
                    <div class="col-12">
                        <label for="address">Building No & Name <small>*</small></label>
                        <input formControlName="address" type="text" id="address" name="address">
                        <div
                            *ngIf="checkoutForm.controls['address'].invalid && (checkoutForm.controls['address'].dirty || checkoutForm.controls['address'].touched)">
                            <small class="error" *ngIf="checkoutForm.controls['address'].errors?.['required']">Address is
                                required.</small>
                        </div>
                    </div>
            
                <div class="address-container">
                    <div class="col-6">
                        <label for="city">City <small>*</small></label>
                        <input formControlName="city" type="text" id="city" name="city">
                        <div
                            *ngIf="checkoutForm.controls['city'].invalid && (checkoutForm.controls['city'].dirty || checkoutForm.controls['city'].touched)">
                            <small class="error" *ngIf="checkoutForm.controls['city'].errors?.['required']">City is
                                required.</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <label>State <small>*</small></label>
                        <input formControlName="state" type="text" id="state" name="state">
                        <div
                            *ngIf="checkoutForm.controls['state'].invalid && (checkoutForm.controls['state'].dirty || checkoutForm.controls['state'].touched)">
                            <small class="error" *ngIf="checkoutForm.controls['state'].errors?.['required']">State is
                                required.</small>
                        </div>
                    </div>
                </div>

                <div class="address-container">
                    <div class="col-6">
                        <label>Landmark</label>
                        <input formControlName="landMark" type="text" id="landmark" name="landmark">
                    </div>
                    <div class="col-6">
                        <label for="postalCode">Postal Code <small>*</small></label>
                        <input formControlName="postalCode" type="text" id="postalCode" name="postalCode">
                        <div
                            *ngIf="checkoutForm.controls['postalCode'].invalid && (checkoutForm.controls['postalCode'].dirty || checkoutForm.controls['postalCode'].touched)">
                            <small class="error" *ngIf="checkoutForm.controls['postalCode'].errors?.['required']">Postal
                                Code is
                                required.</small>
                            <small class="error" *ngIf="checkoutForm.controls['postalCode'].errors?.['pattern']">Postal
                                Code
                                must be 5 digits.</small>
                        </div>
                    </div>
                </div>


            </form>
        </div>

<div class="payment-tab" >

    <section *ngIf="currentStep === 1">
        <h3 class="mt-4 mb-5">Payment Information</h3>
        <form [formGroup]="checkoutForm" class="d-flex  align-items-center flex-column" >
            <div>

                <div>
                    <input formControlName="paymentOption" type="radio" id="cashOnDelivery" value="cashOnDelivery">
                    <label for="cashOnDelivery">Cash on Delivery</label>
                </div>
                <div>
                    <input formControlName="paymentOption" type="radio" id="upi" value="upi">
                    <label for="upi">UPI</label>
                </div>
    
                <div *ngIf="checkoutForm.controls['paymentOption'].value === 'upi'">
                    <h5>UPI ID</h5>
                    <input formControlName="upiId" type="text" id="upiId" name="upiId">
    
                </div>
            </div>
        </form>
    </section>
</div>

        <div class="navigation-buttons col-12">
            <button (click)="previousStep()" [disabled]="currentStep === 0">Previous</button>
            <button (click)="nextStep()" *ngIf="currentStep < 1" [disabled]="!isCurrentStepValid()">Next</button>
            <button (click)="submitForm()" *ngIf="currentStep === 1" [disabled]="!checkoutForm.valid">Submit</button>
        </div>

    </div>

    <div *ngIf="isOrderConfirmed" class="confirmed-order">
        <i class="bi bi-check-circle-fill order-icon"></i>
        <h3>Order Confirmed</h3>
        <p>Thank you for your order! Your order has been successfully placed.</p>
        <p (click)="backToShopping('shop')" class="back-to-shopping">back to shopping</p>
    </div>
</div>